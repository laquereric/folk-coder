@startuml FolkCoderArchitecture
!theme plain
title Folk-Coder: Learning Platform Architecture

' === ACTORS ===
actor "Student" as student
actor "Admin" as admin

' === WEB LAYER ===
package "Web Layer (Controllers)" #c8e6c9 {
    component "SessionsController" as sessions
    component "RegistrationsController" as registrations
    component "CurriculumController" as curriculum
    component "LessonsController" as lessons
    component "JourneyController" as journey
    component "HackathonsController" as hackathons
    component "Admin::DashboardController" as adminDash #ffcdd2
    component "Admin::UsersController" as adminUsers #ffcdd2
}

' === DOMAIN LAYER ===
package "Domain Layer (Models)" #e8f5e9 {
    component "User" as user
    component "CurriculumModule" as module
    component "Lesson" as lesson
    component "LessonCompletion" as completion
    component "Hackathon" as hackathon
    component "Session" as session
}

note right of user
    email_address
    password_digest
    role: member|admin
    has_many :sessions
    has_many :lesson_completions
end note

note right of module
    title, description
    position
    has_many :lessons
    has_many :prerequisites
end note

note right of lesson
    title, description
    content (markdown)
    position
    belongs_to :module
end note

note bottom of completion
    completed_at
    belongs_to :user
    belongs_to :lesson
end note

' === DATA LAYER ===
database "SQLite" as db

' === RELATIONSHIPS ===
student --> sessions : login
student --> registrations : signup
student --> curriculum : browse modules
student --> lessons : study
student --> journey : track progress
student --> hackathons : discover events

admin --> adminDash : view stats
admin --> adminUsers : manage users

sessions --> user
registrations --> user
curriculum --> module
lessons --> lesson
lessons --> completion
journey --> user
journey --> completion

user --> session
user --> completion
module --> lesson
lesson --> completion

user ..> db
module ..> db
lesson ..> db
completion ..> db
hackathon ..> db
session ..> db

' === FEATURES ===
note as features
    **Progress Tracking**
    - Streak calculation
    - Milestones
    - Next lesson suggestion
    - Completion percentage

    **Content Rendering**
    - Markdown via Redcarpet
    - Embedded SVG diagrams
    - Code blocks with syntax
end note

' === TECH STACK ===
note as tech
    **Tech Stack**
    Rails 8.1 | SQLite | Puma
    Hotwire (Turbo + Stimulus)
    Redcarpet | BCrypt
    TailwindCSS
end note

@enduml
