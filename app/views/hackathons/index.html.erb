<section class="pt-32 pb-20 px-4">
  <div class="max-w-6xl mx-auto">
    <h1 class="text-4xl font-bold mb-4"><%= t('hackathons.index.title') %></h1>
    <p class="text-gray-400 text-lg mb-8"><%= t('hackathons.index.subtitle') %></p>

    <!-- Search & Filters -->
    <%= form_with url: hackathons_path, method: :get, data: { turbo_frame: "hackathon_results" }, class: "mb-8" do |form| %>
      <div class="flex flex-col md:flex-row gap-4">
        <div class="flex-1">
          <%= form.text_field :query, value: params[:query],
              class: "w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-gray-100 placeholder-gray-500 focus:outline-none focus:border-folk-blue focus:ring-1 focus:ring-folk-blue",
              placeholder: t('hackathons.index.search_placeholder') %>
        </div>
        <div>
          <%= form.select :theme, options_for_select(@themes, params[:theme]),
              { include_blank: t('hackathons.index.all_themes') },
              class: "bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-gray-100 focus:outline-none focus:border-folk-blue" %>
        </div>
        <div>
          <%= form.select :location_type, options_for_select(@location_types, params[:location_type]),
              { include_blank: t('hackathons.index.all_formats') },
              class: "bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-gray-100 focus:outline-none focus:border-folk-blue" %>
        </div>
        <div>
          <%= form.select :region, options_for_select(@regions, params[:region]),
              { include_blank: t('hackathons.index.all_regions') },
              class: "bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-gray-100 focus:outline-none focus:border-folk-blue" %>
        </div>
        <%= form.submit t('hackathons.index.search_button'), class: "bg-folk-blue hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-medium transition cursor-pointer" %>
      </div>
    <% end %>

    <!-- Results -->
    <%= turbo_frame_tag "hackathon_results" do %>
      <% if @hackathons.any? %>
        <p class="text-gray-400 text-sm mb-6"><%= t('hackathons.index.results_count', count: @hackathons.size) %></p>
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
          <% @hackathons.each do |hackathon| %>
            <div class="bg-gray-800/50 border border-gray-700 rounded-xl p-6 hover:border-folk-blue transition flex flex-col">
              <div class="flex items-center gap-2 mb-3">
                <% badge_color = case hackathon.location_type
                   when "Virtual" then "bg-folk-green/20 text-folk-green"
                   when "In Person" then "bg-folk-purple/20 text-folk-purple"
                   when "Hybrid" then "bg-folk-orange/20 text-folk-orange"
                   else "bg-gray-700 text-gray-300"
                   end %>
                <span class="text-xs font-medium px-2 py-1 rounded-full <%= badge_color %>"><%= hackathon.location_type %></span>
                <span class="text-xs text-gray-500"><%= hackathon.source %></span>
              </div>

              <h3 class="text-lg font-semibold mb-2"><%= hackathon.name %></h3>
              <p class="text-gray-400 text-sm mb-4 flex-1"><%= truncate(hackathon.description, length: 120) %></p>

              <div class="space-y-2 text-sm mb-4">
                <div class="flex items-center gap-2 text-gray-400">
                  <span>&#128197;</span>
                  <span><%= hackathon.start_date.strftime("%b %d") %> - <%= hackathon.end_date.strftime("%b %d, %Y") %></span>
                </div>
                <div class="flex items-center gap-2 text-gray-400">
                  <span>&#128205;</span>
                  <span><%= hackathon.location %></span>
                </div>
                <% if hackathon.prize_pool.present? %>
                  <div class="flex items-center gap-2 text-folk-orange">
                    <span>&#127942;</span>
                    <span><%= hackathon.prize_pool %></span>
                  </div>
                <% end %>
                <div class="flex items-center gap-2 text-gray-400">
                  <span>&#127991;</span>
                  <span><%= hackathon.theme %></span>
                </div>
                <% if hackathon.region.present? %>
                  <div class="flex items-center gap-2 text-gray-400">
                    <span>&#127758;</span>
                    <span><%= hackathon.region %></span>
                  </div>
                <% end %>
              </div>

              <% if hackathon.registration_link.present? %>
                <%= link_to t('hackathons.index.register'), hackathon.registration_link, target: "_blank", rel: "noopener",
                    class: "inline-block text-center bg-folk-blue/20 text-folk-blue hover:bg-folk-blue hover:text-white px-4 py-2 rounded-lg text-sm font-medium transition" %>
              <% end %>
            </div>
          <% end %>
        </div>
      <% else %>
        <div class="text-center py-16">
          <p class="text-gray-400 text-lg"><%= t('hackathons.index.no_results') %></p>
          <%= link_to t('hackathons.index.clear_filters'), hackathons_path, class: "text-folk-blue hover:underline mt-2 inline-block" %>
        </div>
      <% end %>
    <% end %>
  </div>
</section>
